This is nowhere near complete and has lots of issues, so don't use it
until it's done. I'll add docs then.
